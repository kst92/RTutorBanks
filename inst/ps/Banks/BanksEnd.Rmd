# Problemset Effect of Banks


```{r 'check_ps', include=FALSE}

user.name = '' # set to your user name

# To check your problem set, save your file (Ctrl-S) and then run the RStudio Addin 'Check Problemset'

# Alternatively run the following lines 
library(RTutor)
ps.dir = getwd() # directory of this file
ps.file = 'BanksEnd.Rmd' # name of this file
check.problem.set('BanksEnd', ps.dir, ps.file, user.name=user.name, reset=FALSE)
```


How important are banks for development - an RTutor interactive Problemset

Author:  Katharina Stueckelmaier



## Welcome

Welcome to this interactive RTutor Problem Set, which is part of my master thesis at the University of Ulm.
The topic is about the analysis of "How important are banks for development", based on the paper "How important are banks for development? National banks in the united states, 1870-1900" written by Scott L. Fulford. It was published in December 2015 at "The Review of Economic and Statistics". 

The paper, a supplemental appendix and data are available at the following websites:

- **paper**: https://www.mitpressjournals.org/doi/pdf/10.1162/REST_a_00546
- **appendix**: https://www.mitpressjournals.org/doi/suppl/10.1162/REST_a_00546/suppl_file/REST_a_00546-esupp.pdf
- **data**: https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/PQ6ILM

## Exercise Content

1. Historical background

2. Overview of the data

3. Casual Effect of Banking on Production

  3.1 Correction of Standard Errors

4. Estimation with Conditional Mean 

5. Robustness Check

6. Conclusion

7. References



**Set-up of the interactive R-Tutorial**

In the following you can execute various exercises, to give you an understanding of our topic. Furthermore you will learn how to use R for solving statistical problems. I recommend to do the exercises step by step, but if you like to you can choose the order on your own, since every exercise can be solved independently.
During the exercises you can collect awards for solving tasks right. Additional you have to possibility to receive points, for answering quizzes right. 
You will fins many info boxes in the exercises. 
Good luck!

## Exercise 1 - Introduction


Financial institute nowadays settle where they expect to make the most profits. How was the situations during economical growth times? How important were the connection and the accessibility to financial institutes during growth? And were financial institutes able to open a bank where and when they liked to? *How important are banks during the time of development?* 

To open a bank some capital stock is needed. Furthermore we can assume that a bank wouldn't open a branch at a special place without gaining profit out of this, since banks always try to reach profit-maximization. 

We can conclude, that one condition for a bank in a county is that some specific capital stock should be available. To check whether the existing of this bank matters for the development in this county, we can regress how the available *capital stock* of the bank influences the *production per person* in that county.

In the following we will create a plot, where we show the relationship between capital stock and production per person.

**Task:** 

I give you the code for a scatterplot, where we abline the dependence between capital stock an production per person. Just press `edit` and `check`. 

```{r "1___Introduction"}
plotData = read.table("Data2.tab", sep="\t", header=TRUE)
library(dplyr)
plotData = mutate(plotData, ln_tval_pc_100 = ln_tval_pc*100, capitalstockAV=capitalstock_pc*14755)

#create the plot:
plot(plotData$ln_tval_pc_100, plotData$capitalstockAV, col="yellow", xlab ="Production per person", ylab="Capital Stock", xlim=(c(0,1500)), ylim =(c(0,1500)))
abline(lm(ln_tval_pc_100~capitalstockAV + factor(year), data = plotData ), col="red")
```

info("plot") # Run this line (Strg-Enter) to show info

The yellow points displays the diversification. The red line shows the relationship between production per person and capital stock. As you can see in the plot, the production per person in a county depends on the capital stock of the counties bank. The moreproductive the county is, the more capital stock a bank need to provide. Under this assumption, we can try to answer our main question (*How does the existence of a bank effects the development*) by regressing production per person based on the banks capital stock. We will use a period of rapid financial, economic and geographic growth in the United States (Fulford (2015)) to do the analysis. The period will be from 1870 to 1900, right after the Civil War in the United Stated were finished. In the next exercise I will give you a short overview of the historical background during this time.

Like Varian (2011, Chapter 1) explains, every bank tries to choose the best option to enter in a county, which the bank can achieve. We will define the optimal capital stock for a bank in a certain county at a specific time as following:

$$C^{*}_{ct}=\alpha\alpha_{t}P^{\theta+1}_{ct}\eta_{c}\epsilon_{ct}$$

where $P_{ct}$ displays the county population, $\eta_{c}$ stands for local unobservant business conditions and $\epsilon_{ct}$ for local temporal shocks.

info("How to get the optimal capital stock equation for banks") # Run this line (Strg-Enter) to show info

Under the assumption that banks will always open with their optimal capital stock, Fulford defines the outcome of interest as: 

$$Y^{*}_{ct} = \gamma_{c} + \gamma_{t} + \gamma_{e}C^{*}_{ct}/P_{ct}+U^{*}_{ct}   (1)$$. 

- $Y^{*}_{ct}$: outcome of interest, in our case that will be production per person
- $P_{ct}$: county population at the time $t$ in county $c$
- $C^{*}_{ct}$: optimal capital stock
- $U^{*}_{ct}$: error term
- $\gamma_{c}$, $\gamma_{t}$ , $\gamma_{t}$: specific effects


Our aim is to estimate this equation and to get the estimator for $\gamma_{e}$. Before starting with the estimation, you can learn about the historical background of the USA during the chosen period in the next exercise.

## Exercise 2 - Historical background

**U.S. Civil war, 1861-1865**


During the period of 1861 to 1865, there was a civil war in the United States. The conflict was between the northern states, so called `unionstates`, and the southern states. The southern states separated themselves from the United States to create the `Confederate States of America (CSA)`. 

The reason were several political, social as well as economical disagreements. The main controversy was the slavement of black people. As 1860 Abraham Lincoln got voted for president, the southern states separated since they were pro-slavery. Consequently it came to a war. But as the CSA weren't accepted as a state from the rest of the world, they didn't got any support. Thus they hadn't really a chance against the industrial advanced union states. 1865 the Union finally won the war and slavery were abandoned. 

*Map of USA*

In the following map of the USA, the states of CSA are marked. Just press `check`.


```{r "2___Historical_backg"}
require(maps)
library(maps)
CSA = c("alabama", "arkansas", "florida", "georgia", "louisiana", "mississippi", "north carolina", "south carolina", "tennessee", "texas", "virginia")
#namevec <- map(database = "state", col = "blue",fill=T, namesonly=TRUE)
map(database = "state", col = c("white", "blue")[1+(map(database = "state", col = "blue",fill=T, namesonly=TRUE) %in% tolower(CSA) )],fill=T )
```



Since the fight was really expensive, the government of the United States created the `National Banking Act of 1863` to resolve the financial crises.


**National Banking Act of 1863**

The National Banking Act established a national banking system, to resolve the financial crisis during the civil war. The main aim was to assure federal control over the banking system. Furthermore, they wanted to create a uniform national currency, by introducing this national banking system. But what was the difference between the new national banks and the old available state banks?

State banks received their charter from the state government, whether national banks got them from the federal government. Thus, the federal government had control over national banks, but not over state banks. 
Furthermore national banks had higher capital requirements, than state banks. To enter in a certain state, they had to have a capital stock of minimum `50.000$`. Moreover they were restricted from making real loans or lending money over ten percent of the capital of the bank to anyone, to improve liquidity. Additionally, they were regulated by the office of Comptroller of the Currency (OCC), a treasury department created during this Banking Act, who also was responsible to print all national bank notes.

Because of the growth of the national banks, many state banks transformed to national banks. Therefore, already over 1600 national banks existed and around 300 state banks were left in 1870. National bank started to be the most important financial institute in the country. After the civil war finished, the United States had an immense financial, economical as well as geographical growth. Thus, national bank got even more important since they were the only ones who could issue money directly in form of bank notes. Though they still were constrained by the minimal size of capital stock. Some counties, where they maybe could have made big profits, couldn't afford this minimum size. On the other hand, some counties had even more capital, but opened their national banks with the minimum size of capital stock.

We resume:

1. National banks had to afford a minimum capital stock, we will call this "minimum size requirement" 

2. National banks weren't allowed to have any branches


What was the benefit of having a national bank for the residents? 

One goal of national banks is that they could provide liquidity and thus working capital. Furthermore, they created a uniform bank note currency, so that international trading became easier. To stabilize this system, national banks were not allowed to take land as collateral, what was problematic for farmers. Their main investment activities were providing liquidity and moving funds, as Scott L. Fulford claims in his paper.

In the next exercises we will look, how opening a national bank in certain counties affected the development and production there. 
Our dataset contains data about the geographical location and the size of national banks in 1870, 1880, 1890 and 1900. Since there weren't any branches, we can analyse the meaning of local financial development during this period.


**County Statistics**


Before starting to analyse we want to check some variables to get used to the data. Notice, that counties with an urban population of 50.000$ or more in 1880 are excluded in this table. Thus, counties with major cities are excluded, since these counties are not constrained by the minimum capital stock requirement.

<style>
.mytable {
  border-collapse: collapse;
  margin-bottom: 15px;
}
.mytable td {
  padding: 10px 15px;
}
.mytable th {
  padding: 10px 15px;
  border-bottom: 1px solid #ddd;
}
.right-border {
  border-right: 1px solid #ddd;
}
.bigger-font-size {
  font-size: 18px;
}
</style>
  
  <table class="mytable">
  <tr>
  <th class="right-border">Variable Type</th>
  <th>1870</th>
  <th>1880</th>
  <th>1890</th>
  <th>1900</th>
  </tr>
  <tr>
  <td class="right-border">County population</td>
  <td>11.660</td>
  <td>14.703</td>
  <td>17.955</td>
  <td>21.330</td>
  </tr>
  <tr>
  <td class="right-border">Counties</td>
  <td>2.665</td>
  <td>2.745</td>
  <td>2.743</td>
  <td>2.745</td>
  </tr>
  <tr>
  <td class="right-border">Number of banks</td>
  <td>0.41</td>
  <td>0.57 </td>
  <td>1.06</td>
  <td>1.09</td>
  </tr>
  <tr>
  <td class="right-border">Distance to closest bank (km)</td>
  <td>153.2</td>
  <td>89.4 </td>
  <td>42.5</td>
  <td>40.1</td>
  </tr>
  <tr>
  <td class="right-border">Capital stock per 1.000 capita</td>
  <td>1.96</td>
  <td>2.30</td>
  <td>4.46</td>
  <td>3.46</td>
  </tr> 
  <tr>
  <td class="right-border">Total production per capita</td>
  <td>104.0</td>
  <td>80.1</td>
  <td>96.9</td>
  <td>155.0</td>
  </tr>   
  <td class="right-border">Manufacturing value per capita</td>
  <td>38.5</td>
  <td>32.3</td>
  <td>44.7</td>
  <td>60.4</td>
  </tr>   
  <td class="right-border">Farm production value per capita</td>
  <td>65.5</td>
  <td>47.8</td>
  <td>51.0</td>
  <td>94.5</td>
  </tr>   
  </table>

First, we recognize that the average county population raised for about nearly 10.000 from 1870 to 1900. Since we look at the period right after the Civil War, who caused a lot of deaths, it makes sense that the population was smaller at the beginning of our period.

The capital stock per capita increased during this period. Since there was more capital, it was also possible to open more banks. That's why the number of banks increased rapidly during this period. Accordingly, the distance to the next banks decreased for many counties. 

If we take a deeper look at the manufacturing and farm production values, we recognize that first these values decreased and then increased again. Since time effects are included, this swap is explained by the significant deflation during this period, particularly around the Resumption Act of 1875, how Scott L. Fulford stated.

Let's get a better overview of our data in the next exercise.


## Exercise 3. - Casual Effect of Banking on Production

In this exercise we will try to estimate our equation of interest 

$$Y^{*}_{ct} = \gamma_{c} + \gamma_{t} + \gamma_{e}C^{*}_{ct}/P_{ct}+U^{*}_{ct}.$$

First, we have to load our data. The following info box explains how data can be loaded in R.

info("read.table") # Run this line (Strg-Enter) to show info

To start with an exercise, you often must click first `edit` to work on the code. Enter the correct code and afterwards press `check`, to check your code. If you stuck at an exercise just click `hint` to get some help or `solution` to get the result.

**Task:** 

Read in your first data set `Data2.tab` and save it under `Dat1`. Replace `??` and `#`.

```{r "3____Casual_Effect_o__3"}
# ?? = read.table("??", sep="\t", header=TRUE)
```


Furthermore I will do some more settings for our dataset. What exactly I'm doing and why, you will get to know during the next exercises. Pleas press `check`.

```{r "3____Casual_Effect_o__4"}
library(dplyr)
# create some variables
Dat1 = mutate(Dat1, capitalstock50pc = capitalstock_pc*14755 / 50, insample = insample_allrural & tpop>1000, L.capitalstock = lag(capitalstock))

#filter after specific conditions
Dat1 = filter(Dat1, capitalstock<=500, !is.na(L.capitalstock), L.capitalstock <=500, capitalstock50pc <= 5,  capitalstock50pc>0, insample)
```

Now our data is ready for the estimation. Please read through the following info boxes to get to know how to estimate linear models.

info("linear model") # Run this line (Strg-Enter) to show info

info("mixed linear model") # Run this line (Strg-Enter) to show info


**Task:**

Regress log-production per person `ln_tval_pc` on `capitalstock50pc` and `factor(year)` of the data set `Dat1`. Make use of the function `lm()` and save it under the variable `lm1`.

```{r "3____Casual_Effect_o__7"}
#lm1 = (??)
```

The function `summary()` is useful to display regression results.
Let's try it out on our first regression `lm1`. Press `check`.

```{r "3____Casual_Effect_o__8"}
summary(lm1)
```

info("Output of summary()") # Run this line (Strg-Enter) to show info

Try to answer following question:

#! addon__quiz__InterpretOutput

Thus, if a national bank opens in a county the production per person can be `6.12%` higher compared to an unbanked county.
Remember our model equation. We said that we wanted to estimate the effect $\gamma_{e}$. The aim of every regression is that this effect is a casual effect, meaning that the dependent variable depends on the explanatory variable (Field, Mile, Field (2012), p.14).

info("Correlation and Causality") # Run this line (Strg-Enter) to show info

**Question**

#! addon__quiz__Correlation

We have positive correlation. That means, getting higher values for `ln_tval_pc` will lead to higher values for `capitalstock50pc` in average (Hatzinger, Hornik, Nagel (2011), p.278).


The dependent variable `ln_tval_pc` and the explanatory variable `capitalstock50pc` from our model are correlated. But we can't assume that we estimated the casual effect.


Think back at the second exercise, where I explained the *National Currency Act of 1863*. One consequence was, that the national banks had to follow the **minimum capital stock requirement**. If a national bank wanted to enter at a county they had to have at least a capital stock of `50.000$`. Thus $C^{*}_{ct}$ is not only depending of the strategy of the bank, it now also depends on the minimum requirement. That means $\gamma_{e}$ doesn't estimate the casual effect, it estimated the endogenous effect. Furthermore, the effect could also vary over time.

info("Endogenity and Exogenity") # Run this line (Strg-Enter) to show info

The conclusion is, that we have to adapt our equation

$$Y^{*}_{ct} = \gamma_{c} + \gamma_{t} + \gamma_{e}C^{*}_{ct}/P_{ct}+U^{*}_{ct}.$$
to get rid of endogenity. 

Before introducing how we could solve this problem, we will get an overview of our data set. Furthermore, we will check the endogenous effect if national banks are constrained by the minimum capital stock requirement.

## Exercise 3.1. - Overview of the Data

In the exercise before we estimated our equation
$$Y^{*}_{ct} = \gamma_{c} + \gamma_{t} + \gamma_{e}C^{*}_{ct}/P_{ct}+U^{*}_{ct},$$
without respecting the minimum capital stock requirement. All banks included in our estimation weren't constrained by that rule. Thus we calculated the unconstrained effect of the entry of national banks in a county. The production per person increased by `6.12%`, when opening a national bank to the county. In the following we want to include the minimum capital stock rule to our analysis. 


#### Get an Overview of the Data Set

Read in the dataset. 

**Task:** 

Read in the data set `firstTable.tab` and save it under `tab1`. Use as separator `sep="\t"` and don't forget to set the `header` as `TRUE`.  Replace `??` and `#`. 

```{r "3_1____Overview_of_t"}
# ?? 
```


First, we want to take a closer look at our data set. One way is to check it out under `Data Explorer`, but there is also a huge amount of calls in R, which can give us a lot of information. With `dim()` we will get the dimension of the data, meaning how many columns and how many entries the data has, and with `head()` we will see the first few rows. Let's try it out and click on `check`:

```{r "3_1____Overview_of_t__2"}
dim(tab1)
head(tab1)
```

Great! We have seven columns with 22552 entries in our table. 

Take a look at the second row of the displayed table. There we see, that in `1870` the national banks in the county `Autauga` in `Alabama` had a capital stock of `0`. That means that at this point of time, there hasn't been a national bank in `Gautama`. That doesn't mean, that banks in that county didn't had any capital stock at all, it just means that they hadn't enough capital to afford a national bank.
If a bank in a county has less than 50.000$ capital stock, it is marked with `0` in our data set. Some values are marked as `NA`, meaning that we don't have any data for this case. The column `capitalstock1902` is only interesting for us, if we look at the year `1900`. In this year the minimum capital stock requirement got reduced from 50.000$ to 25.000$. So, the column `capitalstock1902` shows us how the capital amount is in `1902`. Since this new rule was introduced in 1900, the data of the years from 1900 are still valid for the old requirement. The changes caused by the new rule can be seen by the data of 1902. For `Autauga` the new requirement didn't make a change, they still couldn't entertain a national bank. 

With `sample_n()` we get a random selection of rows of our data, to get even more familiar with our data set.

**Task:** 

Use the function `sample_n()` in order to show a random sample of ten rows of our table `tab1`. With `set.seed(x)` you can create a random variable, on this way it is possible to reproduce the same sample all the time.

```{r "3_1____Overview_of_t__3"}
#set.seed(1900)
#sample_n(??,10)
```

Now, you can see a random choice of rows of our data set `tab1`. Get familiar with the output and try to answer the next questions.


**Question**

#! addon__quiz__Ohio

**Question**

#! addon__quiz__Kentucky


In the next step, we want to know how many states and how many counties are in our data set. Therefore we will make use of the function `unique()` and `length()`. 

`unique(x)` produces a vector with unique values of `x`, all duplicated elements will be removed. `length(y)` generates the length of vector `y`, meaning it calculates how many elements are available in `y`. 

**Task:**
Use `unique()` and `length()` to find out how many `states` and `counties` are in our data. Delete `#` and replace `??`. After finishing this task, try to answer the question.
```{r "3_1____Overview_of_t__4"}
# ??(??(tab1$statename))
# ??(??(tab1$countyname))

```




**Question:**

#! addon__quiz__countynum



#### How did the number of national banks change between 1870 and 1900?

To analyse this, we need the data from 1870 to 1900. To reduce the size of our sample we will juts use counties with a capital stock less than 200.000 $. Since the values in our data frame are given in 1.000 Dollar, we must filter out `capitalstock <= 200`. For this we make use of the function `filter` from the package `dplyr`.

info("filter()") # Run this line (Strg-Enter) to show info

**Task:**

Try to find all counties from our data `tab1`, which are documented at the period `1870 - 1900` and which had a `capitalstock` less than `200`. For this you need to use the function `filter`, therefore first load the package `dplyr`.
```{r "3_1____Overview_of_t__5"}
#library(??)
#dat1 = ??(??, year>= ??, year <= ??, ?? <= 200) %>% mutate(Year = as.factor(year))

```

Well done! 
`mutate()` is also a function from `dplyr`. It helps us to add new variables to our data set. So, in the task before, we also created the column `Year`. As we set it as `as.factor(year)` we defined it as a factor column. 

Let's take a short look, how this new variable `Year` looks like. Press `check`.

```{r "3_1____Overview_of_t__6"}
set.seed(1234)
sample_n(dat1, 10)
```

As you recognize, the column `Year` has the same values as `year`. The difference is, that in `year` the values are saved as integers and in `Year` we saved them as factors. We will need this later when plotting. 


info("%>% Operator") # Run this line (Strg-Enter) to show info



We will visualize the capital stock amount over the years now. A useful package to plot this is `ggplot2` 

info("Package ggplot2") # Run this line (Strg-Enter) to show info


**Task:**

We want to plot our data `dat1` into a histogram to compare the amount of national banks over the years. We want to plot facets by using the factor-variable `Year`. `breaks = seq(..)` specifies the size settings of our histogram. Delete `#` and replace `??`.

```{r "3_1____Overview_of_t__9"}
#??(data=??, aes(x=capitalstock, fill=year))
#+ ??(breaks=seq(0, 200, by =10)) 
#+ labs(x="County nationalbank capital stock ", y= "Number of counties") 
#+ facet_wrap(~Year)
```

In the plot we can see that a lot of national banks in certain counties had a capital stock of 0. Thus, they had no entry of national banks in this year. Furthermore, we recognize a bunching at 50, meaning that a lot of national banks entered with the minimum capital stock. We don't know if theses banks opened with their optimal capital amount for profit maximization, or if they opened with even a higher capital amount compared to what they would do, if no restriction were there. This leads us to the suggestion that the minimum capital requirement was constraining. 


1900 the minimum capital was reduced from 50.000 Dollar to 25.000 Dollar. How did this affect the behavior of national bank entries? As described before, in our table `tab1` we have data from 1900 and 1902. Now we want to compare them to answer the question. Therefore, we first have to filter our data and then plot them. I give you the code for that, just press `check`.

```{r "3_1____Overview_of_t__10"}
# Filter data `tab1`
cap1900 = filter(tab1, capitalstock <=200, capitalstock1902<=200, year==1900)
# Plot two histograms, one for the data of 1900 and one for the data of 1902
ggplot(data=cap1900)+ geom_histogram(aes(cap1900$capitalstock), breaks=seq(0, 200, by =3),col ="blue", fill="blue", alpha = .5) + geom_histogram(aes(cap1900$capitalstock1902), breaks=seq(0, 200, by =3),col ="green", fill="green", alpha = .5)+ labs(x="County national bank capital stock", y= "Number of counties")
```

The blue filled bars show the capital stock of 1900, the green bars the capital amount in 1902.
Try to answer following questions, according to the diagram:

**Question:**

#! addon__quiz__Plot1 


The number of unbanked counties (with capital stock 0) decreased a lot and a huge amount of national banks opened with 25.000$ capital stock, the new minimum size. We can assume that many counties were willing to support a national bank but didn't had that much capital stock. Thus, the could have a smaller bank before but didn't had one because of the required minimum.

Furthermore, the number of counties with national banks with a capital stock of 50.000$ increased as well. Many reduced their capital amount.

**Question**

#! addon__quiz__Plot2

Resume of the facts, why minimum capital stock was binding:

1. We have a bunching of banks with capital amount of 0 or 50.000$ capital amount.
2. Reducing the minimum size to 25.000$ leads to less bunching of banks with capital amount of 0.
3. Reducing the minimum size to 25.000$ leads to more bank openings with capital amount o 25.000$. 

## Exercise 3.2 - Effect of constrained Banking on Production

In the last exercise you got an overview of our data set. Furthermore, we saw that the minimum capital stock requirement was binding for banks. They couldn't just open a bank with their optimal capital amount, they were constrained by the rule. Like in Exercise 3 we will estimate our regression model, but this time we respect the minimum capital stock of 50.000$.

$$Y^{*}_{ct} = \gamma_{c} + \gamma_{t} + \gamma_{e}C^{*}_{ct}/P_{ct}+U^{*}_{ct}$$

First we have to read in our data again. Press `edit` and `check`. 

```{r "3_2___Effect_of_cons"}
Dat1 = read.table("Data2.tab", header = TRUE, sep = "\t")%>%
       mutate(capitalstock50pc = capitalstock_pc*14755 / 50, insample = insample_allrural & tpop>1000, L.capitalstock = lag(capitalstock))
```

Using the `mutate()` function, we created the variable `capitalstock50pc`. It is the capital stock normalized by the average population of 14.755 during the observed period in a county. Furthermore, to make it easier to read, we measure this variable in units of $50.000. So it will be in units of adding a bank of minimum size to the county population.
We define `insample` to select all rural counties, and also we will just pay attention to counties with a population greater than 1000, `tpop>1000`. With `lag()` we defined the lag variable for capitalstock, to respect growth effects.

To calculate the effect of constrained entry of a national bank to a county, we will include the minimal capital stock requirement of 50.000$. We will compare counties that don't have a bank to counties with a bank, which opened at the minimum size. 
To get this effect, it is necessary to filter out all counties with a capital amount of less than $50.000.

**Task:** 

Filter `capitalstock<=50` and equal to that filter as well `capitalstock50pc<=5`. Again, our data selection should be in our `insample`, remember that this shows us all rural counties with population greater than 1000. 

```{r "3_2___Effect_of_cons__2"}
#d1 = filter(Dat1, insample, ??, ??)

```

You already know, how to regress an equation by using the function `lm()`. With the function `felm()` out of the package `lfe`, I will show you a much faster way to estimate linear model. 

info("felm() function") # Run this line (Strg-Enter) to show info

**Task:**

Estimate `ln_tval_pc~capitalstock50p` using the fixed effect `year` on the base of the data set `d1`. Use `felm()`, but first load the package `lfe`.

```{r "3_2___Effect_of_cons__3"}
#library(??)
#summary(??(ln_tval_pc~capitalstock50pc |year , data = d1))
```

Well done! You already know how to interpret the `Coefficients` Part of a `summary()` output. For the sake of completeness, I will explain the whole output in the following info box.

info("Output of summary()") # Run this line (Strg-Enter) to show info

**Question:**

#! addon__quiz__Output

info("t-Test for the regression coefficient") # Run this line (Strg-Enter) to show info

As I introduced how a linear model is general estimated, I explained you that the estimation is based on the `OLS Estimation`. In the following you can learn more about that topic.

info("Ordinary Least Squares Estimation") # Run this line (Strg-Enter) to show info

When estimating a regression model we want to achieve an optimal result. Thus, some assumption has to be fulfilled, like Kennedy (2008, p.41-42) explains in his book.

info("Five Assumptions for an optimal OLS estimator") # Run this line (Strg-Enter) to show info

Since we have edogenity in our model, we break the second assumption cause we have a biased estimator.

The endogneous effect of unconstrained entry can also be estimated by using an *indicator* for whether the county has a bank or not.

**Task:**

First create a new data set `d2`, based on our data set `Dat1`. Here we want to take counties with a `capitalstock <= 5` and counties which were included in the predefined value `insample`. Afterwards create a regression where we compare the relationship between `ln_tval_pc` and `banks50c`. Include `year` as fixed effects.

```{r "3_2___Effect_of_cons__4"}
#d2 = ??(Dat1, ??, ??)
#summary(??(ln_tval_pc ~ ?? | ??, data=d2))
```

Production per person gets `37%` higher if we use the presence of banks as an indicator.

#! addon__quiz__NullHypothesis


#! addon__quiz__NullHypothesis2


#### Fixed effects


To calculate estimations with fixed effects R offers the package `plm`, a linear model for panel data. We will use the function `plm` out of this package. This function uses the known `lm` function to estimate panel data. But with it we can set estimation models like pooled OLS "pooling", first difference "fd" or fixed effects "within" of which we will make use. The structure of a `plm` function is:


plm(formula, data, subset, weights, na.action, effect = c("individual", "time", "twoways", "nested"), model = c("within", "random", "ht", "between", "pooling", "fd"))

If you want to learn more about the `plm` package look through the following link:

"https://cran.r-project.org/web/packages/plm/plm.pdf".

In the last exercise we made three estimations with time effects, to check how the adding of a bank to a certain county affects the production per person there. Our result was, that if we add a bank at minimum size to a county, we receive a higher output per person. There we differed between counties which had already a bank and counties without any bank before.
Now we want to include as well county fixed effects as well, thus all fixed effects of our estimation are included. To do this we use `plm`. 
Let's start with our first regression, where we just use counties that have at least one bank.

**Task**

Use the `plm`-function to estimate the effect between `ln_tval_pc` and `capitalstock50pc`. Since we want fixed effects to be included, use `model="within"` and `effect="twoways"`. Make use of our predefined data set `d1`.

```{r "3_2___Effect_of_cons__5",results='asis'}
#library(plm)
#plm1 =(??(??~ capitalstock50pc + factor(year), model="??", effect="twoways",data = d1))
#stargazer(plm1, type="html", digits=3, report="vcsp*", omit.stat="ser", model.numbers=FALSE))
```

info("stargazer()") # Run this line (Strg-Enter) to show info

Including fixed effects leads to a higher output per person for about `2.4%` when adding a minimum size bank to a county with at least one bank. Comparing the result to our result without fixed effect of `6%`, that means much less production per person. This can be explained by respecting that "banks are attracted to more productive areas", like Fullford says. 

In the next step we will estimate how much more output a county will get by adding a bank, independent if they had a bank before or not. We will include fixed effects and then compare our result to the one without any effects. I will use again `plm` for the estimation and `stargazer` to compare the results. 

**Task**

Delete `#` and press `check`.

```{r "3_2___Effect_of_cons__7",results='asis'}
#stargazer(plm(ln_tval_pc~ capitalstock50pc + factor(year), model="within", effect="twoways", data =d2), felm(ln_tval_pc ~capitalstock50pc | year, data= d2),type="html", digits=3, report="vcsp*", omit.stat="ser", model.numbers=FALSE)
```

**Question:**

#! addon__quiz__plm

Counties with banks are more productive, than counties without banks. Respecting the fixed effects, production per person is `17.8%` higher.

In the last step we repeat this procedure to our last regression.

**Task**

Delete `#` and press `check`

```{r "3_2___Effect_of_cons__8",results='asis'}
#stargazer(plm(ln_tval_pc~ banks50c + factor(year), model="within", effect="twoways", data =d3), felm(ln_tval_pc ~banks50c | year, data= d3),type="html", digits=3, report="vcsp*", omit.stat="ser", model.numbers=FALSE)
```

Using an indicator for banks and including fixed effects, counties with a bank will have around `11.5%` more production per person than counties without a bank. Since endogeneity is important we must include the fixed effects, which leads to lower estimate results. 

Perfect! We have already seen that gaining a national bank helps a county to get a higher production per person. I will summarise our results in the following table. Be aware that they all show the endogenous effect of entry.

<style>
.mytable {
  border-collapse: collapse;
  margin-bottom: 15px;
}
.mytable td {
  padding: 10px 15px;
}
.mytable th {
  padding: 10px 15px;
  border-bottom: 1px solid #ddd;
}
.right-border {
  border-right: 1px solid #ddd;
}
.bigger-font-size {
  font-size: 18px;
}
</style>
  
  <table class="mytable">
  <tr>
  <th class="right-border">Regression Model</th>
  <th>Capital per capita</th>
  <th>Year FE</th>
  <th>County FE</th>
  </tr>
  <tr>
  <th class="right-border">Unconstrained Entry</th>
  <th>6.12</th>
  <th>Yes</th>
  <th>No</th>
  </tr>
  <tr>
  <th class="right-border">Unconstrained Entry</th>
  <th>2.42</th>
  <th>Yes</th>
  <th>Yes</th>
  </tr>
  <tr>
  <th class="right-border">Constrained Entry</th>
  <th>21.8</th>
  <th>Yes</th>
  <th>No</th>
  </tr>
  <th class="right-border">Constrained Entry</th>
  <th>17.8</th>
  <th>Yes</th>
  <th>Yes</th>
  <th class="right-border">Indicator for a Bank</th>
  <th>37.0</th>
  <th>Yes</th>
  <th>No</th>
  </tr>
  <th class="right-border">Indicator for a Bank</th>
  <th>11.5</th>
  <th>Yes</th>
  <th>Yes</th>
  </tr>
  <tr>
  </table>

## Exercise 4. - Solving the Endogenity Problem




## Exercise 5. - Estimation with conditional mean

In this section I will show you how to estimate with conditional mean to get a less sensitive estimation. 

Remember our equation

$Y_{ct}= \gamma_{c} +\gamma_{t}+ \gamma_{e} C^{*}_{ct}/P_{ct}+ \gamma EC_{ct}/P_{ct}+e_{ct}$.


The main problem here was that we couldn't observe the optimal capital stock $C_{ct}^{*}$. Yet we will calculate the mean optimal capital stock from the density for each county-decade $C_{ct}^{*^{mean}}$ and then replacing $C_{ct}^{*}$ with it. First we have to check whether estimating on this way will lead to the right estimation of $\gamma$. 

What conditions do we have to fulfill?

1. Using the mean optimal capital stock shouldn't change the structure of the problem: Since the relationship between the capital stock per person and the output per person is linear, we will get a linear unbiased estimator $\gamma$ estimating with $C_{ct}^{*^{mean}}$.

2. The conditional mean must be unbiased: We define $C_{ct}^{*}= C_{ct}^{*^{mean}} + u_{ct}$, where $u_{ct}$ is the error term. If $E[u_{ct}|C_{ct}^{*^{mean}}]= 0$, the error term is independent of the observed value. Thus, it is correlated with the true value. Assuming this, replacing $C_{ct}^{*}$ with $C_{ct}^{*^{mean}}$ will still estimate $\gamma$ without bias.

With this assumptions, we can use conditional mean for our estimations.

Since our data set is huge and has a lot of missing values, I will show you how to estimate with conditional mean with a smaller sample. Afterwards I will present the results from Fulford for the whole data set. He uses multiple imputations to fill the missing values with simulated values. If you are interested in the concrete way, please have a look at the Stata-Code from the file "National_bank_analysis3.do" which you can find here: 
https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/PQ6ILM.



We will just look at the state `Mississippi`, which contains only rural counties and was also one of the state under the CSA during the civil war. Have a look where Mississippi is located. Press `check`.

```{r "5____Estimation_with"}
require(maps)
library(maps)
Mis = c("mississippi")
map(database = "state", col = c("white", "blue")[1+(map(database = "state", col = "blue",fill=T, namesonly=TRUE) %in% tolower(Mis) )],fill=T )
```

First, we will not include information  about 1902 in our estimation. I calculated the mean of excess and optimal capital stock and normalized both, such that they are in units of adding a bank of minimum size to the county. 

**Task:**

Read in the data set `Mississippi.tab`. Find the mistake in the following code and delete `#`.

```{r "5____Estimation_with__2"}
# Mississippi = open.csv("Mississippi.csv", header=TRUE, sep="\t")
```



Great! In the next step we will have a look at our new created mean variables. `Mopt_capital_pc` displays the mean of the optimal capital amount. Notice that the mean is calculated for each county and each decade. `Mexcess_capital_pc` shows the mean excess capital for each county and each decade. Excess capital displays the difference between the actual capital stock and the optimal capital stock, $\mathbb{E}(C_{ct})= C_{ct} - C_{ct}^{*}$. Press `check` to get a small overview of these variables.

```{r "5____Estimation_with__3"}
set.seed(50)  #setting a seed to get always the same random sample
sample_n(select(Mississippi, year, countyname, Mexcess_capital_pc, Mopt_capital_pc, capitalstock50pc),10)
```

Have a look at the first line of our output. The national banks in the county `Prentiss` had in `1890` a capital stock of `0`, meaning there was no national bank in Prentiss at this time. Thus the mean excess capital amount is $42900000-0 = -4290000$, as shown in the table. As you can see, the shown counties didn't had a national bank during the displayed period. We want to check now, how many counties had a national bank in Mississippi during the observed period. Be aware that some values are missing, and that for each county we have data for each decade. 

**Task:**
`capitalstock50pc` shows the capital stock normalized by the average population of 14755 during this period in a county. Thus, if it is `0` we know, that a county didn't had a national bank. If it is something positive, we know that the county had national banks, which opened with a specific capital stock. How can you check, how many counties in `Mississippi` didn't had a national bank in our sample? Try to work with the variable `capitalstock50pc`.

```{r "5____Estimation_with__4"}
#??(Mississippi$capitalstock50pc)
```

**Question:**

#! addon__quiz__NumberOfUnbankedCounties

In Mississippi not many counties could afford a national bank during the period of 1870 to 1900. Maybe they were restricted by the minimum capital stock size of 50.000$ or they didn't had capital at all to open national banks.
Nevertheless we will make estimations with conditional mean to check how extra banking could have affect the development in Mississippi.

We will do the estimations on basis of a one-period lag. On this way we can suggest continuing growth effects and not just single-level effects. To do that, we have to define the lags for our important variables `Mopt_capital_pc` and `Mexcess_capital_pc`. Furthermore, we will use in all regressions time and county fixed effects. Normally we would also cluster for states, but since we just look at the state Mississippi we can skip this step.

Let's start by defining the lag-variables. Just press `check`.

```{r "5____Estimation_with__5"}
Mississippi = mutate(Mississippi, 
                     LMopt_capital_pc=lag(Mopt_capital_pc), LMexcess_capital_pc= lag(Mexcess_capital_pc))
```


Perfect! Now we can start with the first estimation, where we check the log total production value per capital in Mississippi.

**Task:**
Create an estimation for `ln_tval_pc ~ LMopt_capital_pc + LMexcess_capital_pc` with `felm`. County and time fixed effects should be included. Delete `#` and replace `??`.
```{r "5____Estimation_with__6"}
#summary(??(ln_tval_pc ~ LMopt_capital_pc + ??|year+countynum, data=Mississippi))

```

The important variable in this estimation is `LMexcess_capital_pc`. It shows us, how much extra banking would effect the production per person including a one-period lag. Thus, opening a national bank in Mississippi would increase production per person for about `12.3%`.

What about `LMopt_capital_pc`? This variable displays the mean optimal capital stock over all decades and all counties in Mississippi. In our estimation it shows the impact of optimal capital stock per capita. Thus, the coefficient on optimal capital per person in Mississippi is about `26.7%`. 

We checked how opening a national bank in Mississippi effects the total production per capita. But total production can be separated in manufacturing and agriculture. Let's first check the effect of manufacturing production.

**Task:**
In the following I show you a code how to measure the above described effect. Check the code and find the mistake.
```{r "5____Estimation_with__7"}
#summary(felm(ln_manuf_val_pc + LMopt_capital_pc + LMexcess_capital_pc|year+countynum, data=Mississippi))

```

**Question:**

#! addon__quiz__EffectManufacturing

Now we want to compare, how the effect of banking is for farm production. Press `check`.

```{r "5____Estimation_with__8"}
summary(felm(ln_farmprod_val_pc ~ LMopt_capital_pc + LMexcess_capital_pc|year+countynum, data=Mississippi))
```

Gaining a national bank in Mississippi leads to a negative result for farm production in Mississippi. How could this be? First, remember that national banks couldn't lend land and the only way to help agriculture was to provide capital to farmers. As we have seen before, there hasn't been many national banks in Mississippi, thus farmer couldn't be promoted by them. Second, the manufacturing could have played a more important role in Mississippi than agriculture. Thus, national bank would have more support manufacturing production.

In the whole analysis we didn't took notice of the reduced minimal capital stock requirement from 1900. Now, we want to include this information. Therefore, we have to read in a data set with information about 1902. Afterwards we will calculate the needed lags again. Remember that this new rule was published in 1900, but the effect of this change are documented in our data set in the year of 1902.

Press `check`.

```{r "5____Estimation_with__9"}
#load file
Mississippi1902 = read.csv("Mississippi25.csv", header=TRUE, sep="\t")
#create new variables
Mississippi1902 = mutate(Mississippi1902,
                         LMopt_capital_pc=lag(Mopt_capital_pc), LMexcess_capital_pc= lag(Mexcess_capital_pc))
```

Let's start again to estimate the banking effect on the total production per capita, including the new requirement of 1900.

**Task:**

Create a regression for `ln_tval_pc ~ LMopt_capital_pc + LMexcess_capital_pc`. Year and county fixed effects should be included. Use again `felm` for the estimation. Delete `#` and replace `??`.  
```{r "5____Estimation_with__10"}
#summary(??(ln_tval_pc ~ LMopt_capital_pc + LMexcess_capital_pc| ?? + countynum, data=Mississippi1902))

```

Including the information about 1902, the total production per person increases for about `20.77%` if opening a new national bank in Mississippi. Since `20.77% > 12.3%`, the new lower minimum capital requirement of 25.000$ introduced in 1900 has a higher effect on the production than before. We can assume that a lot of national banks were constrained by the minimum size of 50.000$ and couldn't open a bank in Mississippi before the minimum stock was reduced. In the following we check the effect for manufacturing and farm production including the information from 1902. I will give you the code, just press `check`.

```{r "5____Estimation_with__11"}
summary(felm(ln_manuf_val_pc ~ LMopt_capital_pc + LMexcess_capital_pc| year + countynum, data=Mississippi1902))
summary(felm(ln_farmprod_val_pc ~ LMopt_capital_pc + LMexcess_capital_pc| year + countynum, data=Mississippi1902))
```

The increment of manufacturing is with the information of 1902 around `5.86%`, without the information it was `6.2%`. The result for the improvement of farm production per person is still negative but is now higher than before `-13,3% < -7.75%`. 

How can we interpret this result? Before the minimum capital stock were lowered, we assumed that Mississippi focused on manufacturing rather than on agriculture. With the information about the 25.000$ capital stock requirement, we can see that they still promote industrialization but also focus now on farm production. The number of national banks raised, thus they had more working capital for farmers as well. Therefore the farm production could increase. But after all, we can still assume that Mississippi was a state of manufacturing. 

Mississippi is a small state in the United States. Thus we can't make a conclusion for the whole USA based in our analysis. Since Fulford did the analysis for the whole country by using the county conditional mean, we will take a look at his results. You can find the following shown results in his paper on page 934. Notice that a one-period lag and information about 1902 are included. Furthermore, year and county fixed effects are respected. Excess capital and optimal capital per capita are measured again in units of 50.000$ per average population of 14.755, thus they show the effect of adding a bank of minimum size to a county. Be aware that just rural counties are included in the estimation.


<style>
.mytable {
  border-collapse: collapse;
  margin-bottom: 15px;
}
.mytable td {
  padding: 10px 15px;
}
.mytable th {
  padding: 10px 15px;
  border-bottom: 1px solid #ddd;
}
.right-border {
  border-right: 1px solid #ddd;
}
.bigger-font-size {
  font-size: 18px;
}
</style>
  
  <table class="mytable">
  <tr>
  <th class="right-border"> </th>
  <th>Log Total Production Value per Capita x 100</th>
  <th>Log Manufacturing Value per Capita x 100</th>
  <th>Log Farm Production Value per Capita x 100</th>
  </tr>
  <tr>
  <th class="right-border">Excess capital per capita</th>
  <th>9.872</th>
  <th>5.828</th>
  <th>13.160</th>
  </tr>
  <tr>
  <th class="right-border">Optimal capital per capita</th>
  <th>3.451</th>
  <th>2.440</th>
  <th>1.988</th>
  </tr>
  <tr>
  </table>
  

Study the table and try to answer the following questions.

**Questions:**

#! addon__quiz__Table1

#! addon__quiz__Table2


Great! Extra banking with minimum capital stock would increase total production per person for about `9.87%`. The impact of optimal capital stock per capita lays here around `3.45%`, which is very close to our result in Exercise 3 (first regression with fixed effect, calculating the effect for counties with at least one bank). Thus, the effect of gaining a minimum size banks is substantially larger than the endogenous effect how Fulford claims. Knowing this, we can also suggest that the pure entry effect of a national bank is really large. 

If we compare the effect of manufacturing per person being around `5.82%` and effect on the farm production of `13.16%`, we can assume that the increase of total production per person is the result of the high increase of farm production per person. In the analysis counties with major cities are excluded. In such areas manufacturing played a bigger role than in rural counties, and we can assume that in such counties national banks may have promoted manufacturing more. All in all, we can claim that national banks increased production per capita compared to unbanked counties.



## Exercise 6. Robustness Check

Robustness checks play an important role in the regression analysis. While regression analysis tries to find the relationship between a dependent variable and one ore more independent variables, robustness checks tries to figure out if the regression model is robust to changes. It will check how the conclusions change when the assumption changes.

In this exercise we will check our results for robustness. Therefore we will restrict our sample in various ways.

### Not including 1902

One thing we have to worry about, is that counties who are far away from getting a bank can influence the results. The information from 1902 about banking with the lower minimum capital stock of 25.000$, gives us an overview of the distribution of optimal capital for counties with no banks. Not using the information from 1902 displays how the functional form of our estimation is responsible for the results.

In Exercise 4 we estimated the dependence between production per person and banking in Mississippi. Once we used the information from 1902 and one time didn't included them. We will now compare the results. First, load again the data set. Find the two mistakes in the following code.  

```{r "6__Robustness_Check"}
#Data without information from 1902:

#Mississippi = read.csv("Mississippi.csv", header=TRUE, sep="\t")+
#              mutate(LMopt_capital_pc=lag(Mopt_capital_pc), LMexcess_capital_pc= lag(Mexcess_capital_pc))

#Data with information from 1902:

#Mississippi1902 = read.csv("Mississippi25.csv", header=TRUE, sep="\t")%>%
#              filter(LMopt_capital_pc=lag(Mopt_capital_pc), LMexcess_capital_pc= lag(Mexcess_capital_pc))
```


**Task:**

Compare the results of the estimation `ln_tval_pc ~ LMopt_capital_pc + LMexcess_capital_pc`, once using information from 1902 and once not. Delete `#` and replace `??`.

```{r "6__Robustness_Check__2",results='asis'}
#??(felm(ln_tval_pc ~ LMopt_capital_pc + LMexcess_capital_pc|year+countynum, data=Mississippi),           felm(ln_tval_pc ~ LMopt_capital_pc + LMexcess_capital_pc|year+countynum, data=Mississippi1902), type="html", digits=3, report="vcsp*", omit.stat="ser", model.numbers=FALSE, column.labels=c("Not including 1902 ", "Including 1902 "))
```



The estimation result with the information of 1902 is higher then without it. Not using the information of 1902, counties with no bank could be anywhere below $C^{T}$, the optimal capital. Maybe they are very near to gaining $C^{T}$ and restricted by the requirement of opening a national bank. But maybe they are far away of the optimal capital and wouldn't even open a national bank, if there hasn't been the capital stock requirement. Including now the extra information from 1902, we can claim that counties without a bank are even more far away of gaining a national bank since their capital stock must be now smaller than $C^{T}_{25}$, the optimal capital with the 25.000$ minimum capital stock rule. These counties are now far away of the entry point and don't influence our result anymore. We can suggest now that the estimation is robust.

We want to check robustness also for our whole data set and thus for the estimation results for the whole USA. Therefore we will have a look at the results of Full ford, which you can find on page 935 in his paper. In the estimation there are just `rural counties` included and and `one-period lags`. Furthermore, I will just display the result for the `mean excess capital per capita`.

<style>
.mytable {
  border-collapse: collapse;
  margin-bottom: 15px;
}
.mytable td {
  padding: 10px 15px;
}
.mytable th {
  padding: 10px 15px;
  border-bottom: 1px solid #ddd;
}
.right-border {
  border-right: 1px solid #ddd;
}
.bigger-font-size {
  font-size: 18px;
}
</style>
  
  <table class="mytable">
  <tr>
  <th class="right-border">Dependent variable</th>
  <th>Using 1902</th>
  <th>Not Using 1902</th>
  </tr>
  <tr>
  <th class="right-border">Log total production per capita x 100</th>
  <th>10.077</th>
  <th>11.084</th>
  </tr>
  <tr>
  <th class="right-border">Log manufacturing production per capita x 100</th>
  <th>5.828</th>
  <th>3.706</th>
  </tr>
  <tr>
  <th class="right-border">Log farm production per capita x 100</th>
  <th>13.162</th>
  <th>13.599</th>
  </tr>
  <tr>
  </table>
  

Study the table. Comparing the results between including 1902 and not, we see that they nearly didn't change. We can claim the same things as for the Mississippi estimation. The counties with no banks will be even more far away from the entry point including information of 1902, than not. Thus, many of them will not be included in the estimation when using 1902. The amount of included counties in this case is smaller compared to not using 1902. That means, the estimation with not using 1902 has more counties included with no precise information about them. But still this will not change the results. The estimation approach is robust.


### Excluding the South

In our estimations we always used rural counties and excluded counties with major cities. But the rural counties can also be separated in union rural counties and not union rural counties. 

After the civil was finished, the states of the CSA were again taken over by the USA. But they were really poor after the war, and a lot of people there had to die during the war. Thus, the population were there on a minimum. Furthermore, they were really poor banked. Remember our analysis from Mississippi, which was not a union state, there we saw that the state had a lot of unbanked counties. Our estimation could be influenced by this poorly banked states in the `South`. Also, there were some counties in the `West` with a low number of banks and a small population, compared to the counties in the `North` and `Mid-West`. Thus, we want to check the results by excluding the South and the West and just take the union rural states in the sample. Have a look, at the union states on the following map. Press `check`.

```{r "6__Robustness_Check__3"}
require(maps)
library(maps)
Union = c("california", "connecticut", "delaware", "illinois", "indiana", "iowa", "kansas", "kentucky", "maine", "maryland", "massachusetts", "michigan", "minnesota", "missouri", "nevada", "new hampshire", "new jersey", "new york", "ohio", "oregon", "pennsylvania", "rhode island", "vermont", "west virginia", "wisconsin")
#namevec <- map(database = "state", col = "blue",fill=T, namesonly=TRUE)
map(database = "state", col = c("white", "blue")[1+(map(database = "state", col = "blue",fill=T, namesonly=TRUE) %in% tolower(Union) )],fill=T )
```




Therefore, we look at the results of the estimation with conditional mean just using union rural counties, as Fulford displayed.

<style>
.mytable {
  border-collapse: collapse;
  margin-bottom: 15px;
}
.mytable td {
  padding: 10px 15px;
}
.mytable th {
  padding: 10px 15px;
  border-bottom: 1px solid #ddd;
}
.right-border {
  border-right: 1px solid #ddd;
}
.bigger-font-size {
  font-size: 18px;
}
</style>
  
  <table class="mytable">
  <tr>
  <th class="right-border">Dependent variable</th>
  <th>Using 1902</th>
  <th>Not Using 1902</th>
  </tr>
  <tr>
  <th class="right-border">Log total production per capita x 100</th>
  <th>8.890</th>
  <th>10.574</th>
  </tr>
  <tr>
  <th class="right-border">Log manufacturing production per capita x 100</th>
  <th>10.560</th>
  <th>10.308</th>
  </tr>
  <tr>
  <th class="right-border">Log farm production per capita x 100</th>
  <th>16.198</th>
  <th>14.415</th>
  </tr>
  <tr>
  </table>

As you can compare the upper table, the results excluding the South nearly didn't change.

**Question:**
#! addon__quiz__Robustness

Compare as well the result above, between including information from 1902 and not. Again, the results largely unchanged and the robustness we claimed before is holding for only union states as well.


### State Banks

Our estimation shows the effect of minimum size banking of national banks. But the effect of providing services of a national banks is not necessarily the effect of any access to banking, like Fulford presents. 
National banks weren't the only financial institutes in the United States during the period of 1870 to 1900. There also have been state banks. With the establishment of national banks the number of state banks decreased to a minimum. Until the late 1880s there were just a few state banks left. This means during this time our estimation couldn't be effected of state banks, since there were too few of them. But after 1890 many state banks entered and were in real competition with national banks. State banks weren't restricted by the minimum capital stock requirement. Thus, they could offer lower capital stock requirements and enter places where national banks couldn't. Since the minimum capital stock requirements of state banks weren't uniform, they were able to offer low minimums to places with no bank. Therefore, such counties were able to get banking somehow. Low state bank minimums were provided in unattractive areas for banking and weren't a real competition there for national banks. Still, our regression approach is robust.



## Exercise 7. Conclusion

We are all used to online banking and getting our money where and when we want to. But in the past it wasn't easy like today. The aim of banks was to provide exchange and to make commerce more easy. They tried to connect places financially.

National banks played an important role in the payment system. They could provide loans and currency in form of national notes. Thus, the exchange of good got comfortable and more simple. They couldn't do long-term loans but could provide working capital to farmers and producers. We found out that the presence of a national bank in an rural county increased production per capita by `10%`. Thus, we can claim that providing working capital played a important role in a growing economy rather then providing debit. Furthermore, we saw that national banks promoted both manufacturing and farm production. Since the United States during the analysed period could be compared to today developing countries, we can assume that the services of national banking played an important role in the development of the USA. Like Fulford says, "Facilitating a payments system, providing working capital, and funding goods in transit are key functions of banks during periods of growth and development".


Finally, you can display all awards that you collected in this problem set. Just press `edit` and `check` afterwards. The maximum number of achievable awards is #nummer einfugen.

```{r "7__Conclusion",optional=TRUE}
awards()
```



## Exercise 7. References

### Bibliography

- Auer, B., Rottmann, H. (2010): *Statistik und Oekonometrie fuer Wirtschaftswissenschaftler: Eine anwednungsorientierte Einfuehrung*. 1. Edition. Wiesbaden: Gabler Verlag.

- Fahrmeir, L., Kneib, T., Lang,S. (2009): *Regression: Modelle, Methoden und Anwendungen*. 2. Edition. Heidlberg: Springer Verlag.

- Faraway, J.J. (2006): *Extending the Linear Model with R: Generalized Linear, Mixed Effects and Nonparametric Regression Models*. Boca Raton: Taylor and Francis Group.

- Field, A., Miles, J., Field, Z. (2012): *Discovering Statistics Using R*. 1. Edition. London: SAGE Publications Ltd.

- Hatzinger, R., Hornik, K., Nagel, H. (2011): *R Einfuehrung durch angewandte Statistik*. Muenchen: Pearson Studium

- Kennedy, P. (2008): *A Guide to Econometrics*. 6. Edition. Malden: Blackwell Publishing.

- Kohler, U., Kreuter, F. (2012): *Datenanalyse mit Stata: Allgemeine Konzepte der Datenanalyse und ihre praktische Anwendung*. 4. Edition. Muenchen: Oldenbourg Wissenschaftsverlag GmbH.

- Luhmann, M. (2013): *R fuer Einsteiger: Einfuehrung in die Statistiksoftware fuer die Sozialwissenschaften*. 3. Edition. Basel: Beltz Verlag.

- Maindonald, J., and Braun, J.W. (2010): *Data Analysis and Graphics Using R: An Example-Based Approach*. 3. Edition. Cambridge: Cambridge University Press.

- Panik, M.J. (2012): *Statistical Inference: A Short Course*. Online Resource. Hoboken, N.J: Wiley.

- Varian, H.R. (2011): *Grundzuege der Mikrooekonomik*. 8. Edition. Muenchen: Oldenbourg Wissenschaftsverlag GmbH.

- Wooldrige, J.M. (2016): *Introductory Econometrics: A Modern Approach*. 6. Edition. Boston, MA: Cengage Learning

- Wollschlaeger, D. (2014): *Grundlagen der Datenanalyse mit R: Eine anwendungsorientierte Einfuehrung*. 3. Edition. Berlin: Springer-Verlag.


### R Packages

- Gaure, S. (2016): *lfe*. *Linear Group Fixed Effects*. R package version 2.5-1998. https://cran.r-project.org/web/packages/lfe/lfe.pdf.

- Hlavac, M. (2015): *stargazer*. *Well-Formatted Regression and Summary Statistics Tables*. R package version 5.2. https://cran.r-project.org/web/packages/stargazer/stargazer.pdf.

- Hothorn, T., Zeileis, A., Farebrother, R. W. and Cummins, C. (2017): *lmtest*. *Testing Linear Regression Models*. R package version 0.9-35. https://cran.r-project.org/web/packages/lmtest/lmtest.pdf.

- Kranz, S. (2015): *RTutor*. *R Problem Sets with Automatic Test of Solution and Hints*. R package version 2015.12.16. https://github.com/skranz/RTutor.

- Wickham, H. and Chang, W. (2016): *ggplot2*. *Create Elegant Data Visualisations Using the Grammar of Graphics*. R package version 2.2.1. https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf.

- Wickham, H., Francois, R., Henry, L. and M&uuml;ller, K. (2017): *dplyr*. *A Grammar of Data Manipulation*. R package version 0.7.3. https://cran.r-project.org/web/packages/dplyr/dplyr.pdf.



### Web Pages

- http://www.r-tutor.com/r-introduction/data-frame/data-import

- https://cran.r-project.org/web/packages/dplyr/vignettes/dplyr.html

- https://cran.r-project.org/web/packages/ggplot2/ggplot2.pdf

- https://stat.ethz.ch/R-manual/R-devel/library/stats/html/lm.html

- https://cran.r-project.org/web/packages/plm/plm.pdf

- https://de.wikipedia.org/wiki/Exogenit%C3%A4t_und_Endogenit%C3%A4t


